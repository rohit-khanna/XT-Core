!function(t){var e={};function r(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(i,o,function(e){return t[e]}.bind(null,o));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e,r){"use strict";const i=r(1);t.exports=class{constructor(t){this.url=t}async save(t){return await i(this.url,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(t)})}async findAll(){return await i(this.url)}async findById(t){return await i(this.url+"/"+t)}test(){console.log("yess")}async update(t){return await i(this.url+"/"+t.id,{method:"PUT",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(t)})}async removeById(t){return await i(this.url+"/"+t,{method:"DELETE",headers:{"Content-Type":"application/json; charset=utf-8"}})}}},function(t,e,r){"use strict";var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}();t.exports=e=i.fetch,e.default=i.fetch.bind(i),e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response},function(t,e,r){"use strict";r.r(e);var i=class{constructor(t,e,r,i=-1){this.id=t,this.quantity=1,this.specialPrice=i,this.size=e,this.color=r}getProductDetails(){throw new Error("Not Implemented")}getProductPrice(){return 655.76}};var o=class{constructor(){this.cartProducts=[],this.itemCount=0,this.promoCode,this.subTotal=0,this.shippingCharge=0,this.estimatedTotal=0,this.promoCodeDiscount=0}addProduct(t,e,r,o){let s=new i(t,e,r,o);this.cartProducts.push(s),this.itemCount++,this.incrementSubTotal(s)}incrementProductQuantity(t){let e=this.cartProducts.find(e=>e.id==t);e.quantity++,this.itemCount++,this.incrementSubTotal(e)}decrementProductQuantity(t){let e=this.cartProducts.find(e=>e.id==t);e.quantity--,this.itemCount--,this.decrementSubTotal(e)}removeProduct(t){let e=this.cartProducts.find(e=>e.id==t);for(let t=0;t<e.quantity;t++)this.itemCount--,this.decrementSubTotal(e);let r=this.cartProducts.findIndex(e=>e.id===t);this.cartProducts.splice(r,1,void 0)}editProduct(t,e,r,i){let o=this.cartProducts.find(e=>e.id==t);if(r&&(o.size=r),e&&(o.color=e),i){let e=i-o.quantity;if(0==e)throw new Error("NOT HANDLED");for(let r=0;r<e;r++)e>0?this.incrementProductQuantity(t):this.decrementProductQuantity(t)}}incrementSubTotal(t){this.subTotal+=-1!=t.specialPrice?t.specialPrice:t.getProductPrice(),this.calculateEstimatedTotal()}decrementSubTotal(t){this.subTotal-=-1!=t.specialPrice?t.specialPrice:t.getProductPrice(),this.calculateEstimatedTotal()}calculateEstimatedTotal(){this.estimatedTotal=this.subTotal-this.promoCodeDiscount+this.shippingCharge}applyPromoCode(t){if(t){switch(t=t.toUpperCase(),this.promoCode=t,t){case"RK01":this.promoCodeDiscount=10;break;case"RK02":this.promoCodeDiscount=20;break;case"RK03":this.promoCodeDiscount=30;break;default:this.promoCodeDiscount=0}this.calculateEstimatedTotal()}}applyShippingCharge(t){this.shippingCharge=parseFloat(t),this.calculateEstimatedTotal()}};var s=class{constructor(t){this.dalObj=t}async _handleDALResponse(t){if(200===t.status||201===t.status)return await t.json();throw"ServiceAPI Call failed. Status Code:"+t.status+"  "+t.statusText}async saveProductAsync(t){return new Promise((e,r)=>{this.dalObj.save(t).then(t=>this._handleDALResponse(t)).then(t=>{e(t)}).catch(t=>{r(new Error("saveProductAsync():"+t))})})}async findProductAsync(t){return new Promise((e,r)=>{this.dalObj.findById(t).then(t=>this._handleDALResponse(t)).then(t=>{e(t)}).catch(t=>{r(new Error("findProductAsync():"+t))})})}async findAllProductsAsync(){return new Promise((t,e)=>{this.dalObj.findAll().then(t=>this._handleDALResponse(t)).then(e=>{t(e)}).catch(t=>{e(new Error("findAllProductsAsync():"+t))})})}async updateProductAsync(t){return new Promise((e,r)=>{this.dalObj.update(t).then(t=>this._handleDALResponse(t)).then(t=>{e(t)}).catch(t=>{r(new Error("updateProductAsync():"+t))})})}async deleteProductAsync(t){return new Promise((e,r)=>{this.dalObj.removeById(t).then(t=>this._handleDALResponse(t)).then(t=>{e(t)}).catch(t=>{r(new Error("deleteProductAsync():"+t))})})}},n=r(0),a=r.n(n);var c=class{constructor(t){if(this.cart=new o,t)this.productService=t;else{let t=new a.a("http://localhost:3000/products");this.productService=new s(t)}}async __loadSampleProductData(){(await this.productService.findAllProductsAsync()).forEach(t=>{this.cart.addProduct(t.id,t.availableSizes[0],t.availableColors[0],t.price)})}changeProductQuanity(t,e){this.cart.editProduct(t,null,null,e)}changeProductColor(t,e){this.cart.editProduct(t,e,null,null)}changeProductSize(t,e){this.cart.editProduct(t,null,e,null)}applyPromoCode(t){this.cart.applyPromoCode(t)}applyShippingCharge(t){this.cart.applyShippingCharge(t)}};$(function(){console.log("JQuery Ready"),async function(t){await t.__loadSampleProductData(),console.log(t)}(new c)})}]);
//# sourceMappingURL=my-first-webpack.bundle.js.map